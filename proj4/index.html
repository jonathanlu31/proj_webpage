<html>
  <head>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <h1>Project 4: Cloth Sim</h1>
    <h3>Jedi Tsang and Jonathan Lu</h3>
    <a href="https://jonathanlu31.github.io/proj_webpage/proj4/index.html">https://jonathanlu31.github.io/proj_webpage/proj4/index.html</a>
    <section->
      <h2>Overview</h2>
      <p>
        Our goal in this project was to create a physically based simulator for cloth materials. First, we constructed the cloth using a mass-spring system where point masses were evenly dispersed along a given area and connected with different kinds
        of springs like structural, bending, and shear springs. After the basic structure was made, we added support for gravity and motion using Verlet integration, Hook's law, damping, and some position update constraints so the springs wouldn't be
        deformed too much in one step. These basic rules allowed the cloth to fall realistically, so then we added support for collisions so the cloth could land and rest on an object. We implemented collision tests for spheres and planes and
        constrained its motion so that if the next point mass position would go inside the object, we forced it to rest slightly above the surface. After that, we added self collision tests so that if two point masses got too close to each other,
        they'd be forced apart to a general minimum distance. This was optimized by using spatial hashing so that certain points only needed to test for collision if they were in the same spatial region. Finally, we added different shaders to give a
        nice appearance to the cloth. Blinn-Phong model shading allowed for semi-realistic light shading, and texture maps, bump mapping, and displacement mapping added more flavor to the appearance. Displacement mapping was especially unique since
        not only were the pixel colors set by the shader, but also to some extent, the vertex positions. Finally, the mirror reflection added a sort of ray-tracing flavor to the project.
      </p>
      <p>
        We ran into some challenges with ensuring the vectors and forces were pointing the right direction and that vectors were normalized. We also had some other small bugs with point mass position correction. Although it wasn't exactly a bug, we
        had some trouble figuring out the correct parameters for the shaders to reproduce the source results; however, it was a fun experience playing around with how each parameter affected the final appearance.
      </p>
    </section->
    <section->
      <h3>Part 3. Collisions with other objects</h3>
      <p>
        A lower spring constant will reduce the integrity of the cloth and the forces keeping it together so the cloth hangs more directly down and stretches lower. With a higher spring constant, the cloth becomes more stiff so when it rests on the
        sphere, it still extends outwards a lot as the springs are preventing it from bending and extending downwards.
      </p>
      <div class="images">
        <figure>
          <img src="imgs/sphere_ks500.png" class="img" alt="" />
          <figcaption>ks = 500</figcaption>
        </figure>
        <figure>
          <img src="imgs/sphere_ks5000.png" class="img" alt="" />
          <figcaption>ks = 5000</figcaption>
        </figure>
        <figure>
          <img src="imgs/sphere_ks50000.png" class="img" alt="" />
          <figcaption>ks = 50000</figcaption>
        </figure>
      </div>
      <div class="images">
        <figure>
          <img src="imgs/plane.png" class="img" alt="" />
          <figcaption>Resting on a plane</figcaption>
        </figure>
      </div>
      <p></p>
    </section->
    <section->
      <h3>Part 4. Self Collisions</h3>
      <h4>Default parameters falling cloth</h4>
      <div class="images">
        <figure>
          <img src="imgs/selfC_start.png" class="img" alt="" />
          <figcaption>Early state as the cloth just begins to fall</figcaption>
        </figure>
        <figure>
          <img src="imgs/selfC_middle.png" class="img" alt="" />
          <figcaption>Intermediate state where the cloth starts the bend but before it fully collides with the ground</figcaption>
        </figure>
        <figure>
          <img src="imgs/selfC_end.png" class="img" alt="" />
          <figcaption>Near-resting state where the cloth has generally fully folded</figcaption>
        </figure>
        <figure>
          <img src="imgs/selfC_rest.png" class="img" alt="" />
          <figcaption>Final resting state</figcaption>
        </figure>
      </div>
      <h4>Varying density</h4>
      <p>
        A lower density cloth is a lighter cloth, all else being equal, so the dominant force in the simulation comes from the spring forces. This means when the cloth hits the ground, it'll bounce comparatively high and at a resting state, it'll be
        pretty smooth since the point masses are light enough that the springs can fully extend.
      </p>
      <p>
        With a high density cloth, the dominant force will come from gravity, so as the cloth starts falling, it immediately folds a lot and doesn't bounce. Additionally, at rest, gravity acts to keep the point masses stationary and crumpled so the
        cloth has many folds.
      </p>
      <div class="images">
        <figure>
          <img src="imgs/low_density_bounce.png" class="img" alt="" />
          <figcaption>Low density cloth bounces after hitting the ground</figcaption>
        </figure>
        <figure>
          <img src="imgs/low_density_end.png" class="img" alt="" />
          <figcaption>Low density cloth resting state</figcaption>
        </figure>
        <figure>
          <img src="imgs/high_density_folds.png" class="img" alt="" />
          <figcaption>High density cloth resting state</figcaption>
        </figure>
      </div>
      <h4>Varying spring constant</h4>
      <p>The spring constant generally has an inverse effect compared to density in these simulations. With a low spring constant, gravity/external forces are dominant so the cloth folds easily and remains crumpled at rest.</p>
      <p>With a high spring constant, the spring forces will be dominant and try to return the cloth to its normal flat state. Thus, it tends to bounce more upon hitting the ground, and at rest, it's flatter and has less folds.</p>
      <div class="images">
        <figure>
          <img src="imgs/low_spring_end.png" class="img" alt="" />
          <figcaption>Low spring constant cloth resting state</figcaption>
        </figure>
        <figure>
          <img src="imgs/high_spring_bounce.png" class="img" alt="" />
          <figcaption>High spring constant cloth bounces after hitting the ground</figcaption>
        </figure>
        <figure>
          <img src="imgs/high_spring_end.png" class="img" alt="" />
          <figcaption>High spring constant cloth resting state</figcaption>
        </figure>
      </div>
    </section->
    <section->
      <h3>Part 5. Shading</h3>
      <p>
        A shader program is a program that determines the color for a particular pixel on screen. There's a lot of different types of shaders that can be used to choose the color, for example, you can incorporate vertex normal information to do
        normal shading, or incorporate lighting information like position of lights, angle of light and angle of viewing, etc. A vertex shader tracks information about vertices like their position and normal vectors, texture map coordinates, etc. The
        position of vertices can be changed for displacement mapping. The program then interpolates these values along a face. Fragment shaders then use the values from the vertex shader to determine the output color of a fragment.
      </p>
      <h4>Blinn-Phong Shading</h4>
      <p>
        The Blinn-Phong shading model models lighting on objects as consisting of three main types, ambient, diffuse, and specular. Ambient lighting is general lighting as if a small amount of light was coming from all directions and lights
        everything at every angle to a certain degree. Diffuse lighting is lighting that is view-independent. It models light that comes in from a particular direction and assumes that it gets scattered uniformly in all directions. Thus, the
        brightness on a particular part of an object only depends on its distance and angle to the light source. Specular lighting is view-dependent, where the brightness is maximized when the angle of view from the normal matches the angle of light
        coming in from the normal. This means the direction of view will be aligned with the direction of reflection. Also, by controlling the exponent power, we can control how small or large the specular area is.
      </p>
      <div class="images">
        <figure>
          <img src="imgs/ambient.png" class="img" alt="" />
          <figcaption>Ambient, k_a = 0.5, I_a vector of ones</figcaption>
        </figure>
        <figure>
          <img src="imgs/diffuse.png" class="img" alt="" />
          <figcaption>Diffuse, k_d = u_color</figcaption>
        </figure>
        <figure>
          <img src="imgs/specular.png" class="img" alt="" />
          <figcaption>Specular, k_s = 0.5, p = 100</figcaption>
        </figure>
        <figure>
          <img src="imgs/phong.png" class="img" alt="" />
          <figcaption>Blinn-Phong, all the same parameters as above except k_a = 0.1</figcaption>
        </figure>
      </div>
      <div class="images">
        <figure>
          <img src="imgs/plane.png" class="img" alt="" />
          <figcaption>Resting on a plane</figcaption>
        </figure>
      </div>
      <p></p>
    </section->
  </body>
</html>
